<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visual Feedback Test - Elementor Copier</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 40px;
    }

    .test-section {
      background: white;
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .test-section h2 {
      color: #333;
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 20px;
    }

    .test-section p {
      color: #666;
      margin-bottom: 16px;
      line-height: 1.6;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 16px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      background: #2196f3;
      color: white;
    }

    button:hover {
      background: #1976d2;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    button.success {
      background: #4caf50;
    }

    button.success:hover {
      background: #45a049;
    }

    button.warning {
      background: #ff9800;
    }

    button.warning:hover {
      background: #f57c00;
    }

    button.error {
      background: #f44336;
    }

    button.error:hover {
      background: #d32f2f;
    }

    button.secondary {
      background: #757575;
    }

    button.secondary:hover {
      background: #616161;
    }

    .code-block {
      background: #f5f5f5;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 12px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #333;
      overflow-x: auto;
      margin-top: 12px;
    }

    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 8px;
    }

    .status.implemented {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .feature-list {
      list-style: none;
      padding: 0;
      margin: 16px 0;
    }

    .feature-list li {
      padding: 8px 0;
      color: #666;
      display: flex;
      align-items: center;
    }

    .feature-list li:before {
      content: '✓';
      color: #4caf50;
      font-weight: bold;
      margin-right: 12px;
      font-size: 16px;
    }

    .demo-area {
      background: #fafafa;
      border: 2px dashed #e0e0e0;
      border-radius: 8px;
      padding: 24px;
      text-align: center;
      color: #999;
      margin-top: 16px;
    }
  </style>
</head>
<body>
  <h1>Visual Feedback Test Suite</h1>
  <p class="subtitle">Test all visual feedback features for the Elementor Copier extension</p>

  <!-- Toast Notifications -->
  <div class="test-section">
    <h2>1. In-Editor Toast Notifications <span class="status implemented">✓ Implemented</span></h2>
    <p>Lightweight toast notifications for quick feedback during paste operations.</p>
    
    <div class="button-group">
      <button class="success" onclick="testToastSuccess()">Success Toast</button>
      <button class="warning" onclick="testToastWarning()">Warning Toast</button>
      <button class="error" onclick="testToastError()">Error Toast</button>
      <button onclick="testToastInfo()">Info Toast</button>
    </div>

    <ul class="feature-list">
      <li>Compact design that doesn't obstruct the editor</li>
      <li>Auto-dismiss after 3 seconds</li>
      <li>Smooth slide-in animation</li>
      <li>Color-coded by message type</li>
    </ul>
  </div>

  <!-- Loading Indicators -->
  <div class="test-section">
    <h2>2. Loading Indicators <span class="status implemented">✓ Implemented</span></h2>
    <p>Show progress during paste operations to provide feedback that the system is working.</p>
    
    <div class="button-group">
      <button onclick="testLoadingIndicator()">Show Loading (3s)</button>
      <button onclick="testLoadingWithUpdate()">Loading with Updates</button>
      <button class="secondary" onclick="testLoadingDismiss()">Manual Dismiss</button>
    </div>

    <ul class="feature-list">
      <li>Animated spinner for visual feedback</li>
      <li>Customizable loading message</li>
      <li>Can be updated dynamically</li>
      <li>Manual or auto-dismiss options</li>
    </ul>

    <div class="code-block">
const loading = notificationManager.showLoading('Pasting element...');
// Update message
loading.update('Processing widgets...');
// Dismiss when done
loading.dismiss();
    </div>
  </div>

  <!-- Success Animations -->
  <div class="test-section">
    <h2>3. Success Animations <span class="status implemented">✓ Implemented</span></h2>
    <p>Celebratory animations when paste operations complete successfully.</p>
    
    <div class="button-group">
      <button class="success" onclick="testSuccessAnimation()">Success Animation</button>
      <button class="success" onclick="testMultipleSuccess()">Multiple Success (3x)</button>
    </div>

    <ul class="feature-list">
      <li>Eye-catching gradient background</li>
      <li>Bouncing checkmark animation</li>
      <li>Pulse effect on appearance</li>
      <li>Auto-dismiss after 2 seconds</li>
    </ul>

    <div class="code-block">
notificationManager.showSuccessAnimation('heading');
// Shows: "Heading Added!" with animated checkmark
    </div>
  </div>

  <!-- Progress Indicators -->
  <div class="test-section">
    <h2>4. Progress Indicators for Multi-Element Paste <span class="status implemented">✓ Implemented</span></h2>
    <p>Track progress when pasting multiple elements or complex structures.</p>
    
    <div class="button-group">
      <button onclick="testProgressIndicator()">Progress (5 items)</button>
      <button onclick="testProgressIndicatorFast()">Fast Progress (10 items)</button>
      <button onclick="testProgressIndicatorSlow()">Slow Progress (3 items)</button>
    </div>

    <ul class="feature-list">
      <li>Visual progress bar with percentage</li>
      <li>Current/total count display</li>
      <li>Status message updates</li>
      <li>Smooth transitions</li>
    </ul>

    <div class="code-block">
const progress = notificationManager.showProgress(5);
// Update progress
progress.update(1, 'Pasting section...');
progress.update(2, 'Pasting column...');
// Complete
progress.complete();
    </div>
  </div>

  <!-- Standard Notifications -->
  <div class="test-section">
    <h2>5. Standard Notifications <span class="status implemented">✓ Implemented</span></h2>
    <p>Full-featured notifications with titles, messages, and action buttons.</p>
    
    <div class="button-group">
      <button class="success" onclick="testElementPasted()">Element Pasted</button>
      <button class="warning" onclick="testExternalMedia()">External Media Warning</button>
      <button onclick="testVersionConversion()">Version Conversion</button>
      <button class="error" onclick="testPasteError()">Paste Error</button>
    </div>

    <ul class="feature-list">
      <li>Rich content with title and message</li>
      <li>Optional action buttons</li>
      <li>Manual close button</li>
      <li>Configurable duration</li>
    </ul>
  </div>

  <!-- Integration Test -->
  <div class="test-section">
    <h2>6. Complete Paste Workflow Simulation <span class="status implemented">✓ Implemented</span></h2>
    <p>Simulate a complete paste operation with all visual feedback elements.</p>
    
    <div class="button-group">
      <button class="success" onclick="testCompletePasteWorkflow()">Simulate Single Element Paste</button>
      <button class="success" onclick="testCompleteMultiPasteWorkflow()">Simulate Multi-Element Paste</button>
      <button class="error" onclick="testCompleteErrorWorkflow()">Simulate Paste Error</button>
    </div>

    <div class="demo-area">
      <p>Click a button above to see the complete workflow in action</p>
    </div>
  </div>

  <!-- Clear All -->
  <div class="test-section">
    <h2>7. Utility Functions</h2>
    <div class="button-group">
      <button class="secondary" onclick="clearAllNotifications()">Clear All Notifications</button>
      <button class="secondary" onclick="testStressTest()">Stress Test (10 notifications)</button>
    </div>
  </div>

  <script src="notification-manager.js"></script>
  <script>
    // Initialize notification manager
    const notificationManager = new NotificationManager();

    // Toast Tests
    function testToastSuccess() {
      notificationManager.showToast('Element pasted successfully!', 'success');
    }

    function testToastWarning() {
      notificationManager.showToast('External media detected', 'warning');
    }

    function testToastError() {
      notificationManager.showToast('Paste operation failed', 'error');
    }

    function testToastInfo() {
      notificationManager.showToast('Processing your request...', 'info');
    }

    // Loading Indicator Tests
    let currentLoading = null;

    function testLoadingIndicator() {
      const loading = notificationManager.showLoading('Pasting element...');
      setTimeout(() => {
        loading.dismiss();
      }, 3000);
    }

    function testLoadingWithUpdate() {
      const loading = notificationManager.showLoading('Starting paste operation...');
      
      setTimeout(() => loading.update('Converting format...'), 500);
      setTimeout(() => loading.update('Validating data...'), 1500);
      setTimeout(() => loading.update('Injecting into editor...'), 2500);
      setTimeout(() => {
        loading.dismiss();
        notificationManager.showToast('Paste complete!', 'success');
      }, 3500);
    }

    function testLoadingDismiss() {
      if (currentLoading) {
        currentLoading.dismiss();
        currentLoading = null;
      } else {
        currentLoading = notificationManager.showLoading('This loading indicator stays until dismissed...');
      }
    }

    // Success Animation Tests
    function testSuccessAnimation() {
      notificationManager.showSuccessAnimation('heading');
    }

    function testMultipleSuccess() {
      notificationManager.showSuccessAnimation('section');
      setTimeout(() => notificationManager.showSuccessAnimation('column'), 300);
      setTimeout(() => notificationManager.showSuccessAnimation('widget'), 600);
    }

    // Progress Indicator Tests
    function testProgressIndicator() {
      const progress = notificationManager.showProgress(5);
      
      setTimeout(() => progress.update(1, 'Pasting section...'), 500);
      setTimeout(() => progress.update(2, 'Pasting first column...'), 1000);
      setTimeout(() => progress.update(3, 'Pasting second column...'), 1500);
      setTimeout(() => progress.update(4, 'Pasting heading widget...'), 2000);
      setTimeout(() => progress.update(5, 'Finalizing...'), 2500);
      setTimeout(() => progress.complete(), 3000);
    }

    function testProgressIndicatorFast() {
      const progress = notificationManager.showProgress(10);
      let current = 0;
      
      const interval = setInterval(() => {
        current++;
        progress.update(current, `Processing element ${current}...`);
        
        if (current >= 10) {
          clearInterval(interval);
          setTimeout(() => progress.complete(), 200);
        }
      }, 200);
    }

    function testProgressIndicatorSlow() {
      const progress = notificationManager.showProgress(3);
      
      setTimeout(() => progress.update(1, 'Converting large section...'), 1000);
      setTimeout(() => progress.update(2, 'Processing media files...'), 3000);
      setTimeout(() => progress.update(3, 'Applying styles...'), 5000);
      setTimeout(() => progress.complete(), 6000);
    }

    // Standard Notification Tests
    function testElementPasted() {
      notificationManager.notifyElementPasted('heading', 1);
    }

    function testExternalMedia() {
      notificationManager.notifyExternalMedia([
        'https://example.com/image1.jpg',
        'https://example.com/image2.jpg'
      ]);
    }

    function testVersionConversion() {
      notificationManager.notifyVersionConversion('3.5.0', '4.0.0', [
        'Widget type updated',
        'Settings migrated'
      ]);
    }

    function testPasteError() {
      notificationManager.notifyPasteError('conversion', 'Failed to convert element format');
    }

    // Complete Workflow Tests
    function testCompletePasteWorkflow() {
      // Step 1: Show loading
      const loading = notificationManager.showLoading('Preparing to paste...');
      
      // Step 2: Update loading message
      setTimeout(() => loading.update('Converting format...'), 500);
      setTimeout(() => loading.update('Validating data...'), 1000);
      
      // Step 3: Dismiss loading
      setTimeout(() => loading.dismiss(), 1500);
      
      // Step 4: Show success animation
      setTimeout(() => notificationManager.showSuccessAnimation('heading'), 1600);
      
      // Step 5: Show detailed success notification
      setTimeout(() => {
        notificationManager.notifyElementPasted('heading', 1);
      }, 3700);
    }

    function testCompleteMultiPasteWorkflow() {
      // Step 1: Show loading
      const loading = notificationManager.showLoading('Preparing to paste section...');
      
      // Step 2: Dismiss loading and show progress
      setTimeout(() => {
        loading.dismiss();
        const progress = notificationManager.showProgress(4);
        
        setTimeout(() => progress.update(1, 'Pasting section container...'), 200);
        setTimeout(() => progress.update(2, 'Pasting column 1...'), 700);
        setTimeout(() => progress.update(3, 'Pasting column 2...'), 1200);
        setTimeout(() => progress.update(4, 'Pasting widgets...'), 1700);
        setTimeout(() => progress.complete(), 2200);
        
        // Step 3: Show success animation
        setTimeout(() => notificationManager.showSuccessAnimation('section'), 2400);
        
        // Step 4: Show detailed success notification
        setTimeout(() => {
          notificationManager.notifyElementPasted('section', 4);
        }, 4500);
      }, 1000);
    }

    function testCompleteErrorWorkflow() {
      // Step 1: Show loading
      const loading = notificationManager.showLoading('Attempting to paste...');
      
      // Step 2: Update with error indication
      setTimeout(() => loading.update('Validating clipboard data...'), 500);
      
      // Step 3: Dismiss loading
      setTimeout(() => loading.dismiss(), 1500);
      
      // Step 4: Show error notification
      setTimeout(() => {
        notificationManager.notifyPasteError(
          'conversion',
          'The clipboard data format is invalid or corrupted.'
        );
      }, 1600);
    }

    // Utility Functions
    function clearAllNotifications() {
      notificationManager.clearAll();
    }

    function testStressTest() {
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          const types = ['success', 'warning', 'error', 'info'];
          const type = types[Math.floor(Math.random() * types.length)];
          notificationManager.showToast(`Test notification ${i + 1}`, type);
        }, i * 200);
      }
    }

    // Show welcome message
    setTimeout(() => {
      notificationManager.info(
        'Visual Feedback Test Suite Ready',
        'Click any button to test the notification system. All features are fully implemented!',
        { duration: 6000 }
      );
    }, 500);
  </script>
</body>
</html>
