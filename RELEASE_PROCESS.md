# Release Process Documentation

## Overview

This document explains how releases work for Elementor Copier and what files are included.

## What Gets Released

### ✅ Included in Release

**Only one file is uploaded to GitHub Releases:**
- `elementor-copier-v{version}.zip` - The built extension ready for installation

This ZIP contains:
- `chrome-extension/` folder with all extension files
- `manifest.json`, `background.js`, `content-v2.js`, etc.
- Properly structured for Chrome installation

### ❌ NOT Included (But GitHub Adds Automatically)

GitHub automatically creates these files for every release:
- `Source code (zip)` - Complete repository as ZIP
- `Source code (tar.gz)` - Complete repository as tar.gz

**Important:** These source code archives are **NOT** the extension and should **NOT** be used for installation!

## Why GitHub Includes Source Code

GitHub automatically creates source code archives for every release. This is a GitHub feature that cannot be disabled. However:

- These are for developers who want to see the source code
- They are NOT the built extension
- Users should ignore these and download the `elementor-copier-v*.zip` file instead

## Build Process

### Automated (GitHub Actions)

When you push changes to `main` branch:

1. **Trigger**: Workflow detects changes in `chrome-extension/` folder
2. **Version Check**: Reads version from `manifest.json`
3. **Build**: Runs `build-extension.ps1` script
4. **Package**: Creates `elementor-copier-v{version}.zip`
5. **Release**: Uploads ZIP to GitHub Releases
6. **Tag**: Creates git tag `v{version}`

### Manual (Local Build)

To build locally:

```powershell
# Run build script
.\build-extension.ps1

# Output will be in:
releases/elementor-copier-v{version}.zip
```

## Build Script Details

The `build-extension.ps1` script:

1. **Reads version** from `chrome-extension/manifest.json`
2. **Creates build folder** temporarily
3. **Copies extension files** (excludes docs, build scripts)
4. **Creates ZIP file** with version number
5. **Moves to releases/** folder
6. **Extracts for testing** (optional)
7. **Cleans up** temporary files

### What Gets Included in ZIP

```
chrome-extension/
├── manifest.json
├── background.js
├── content-v2.js
├── page-bridge.js
├── clipboard-manager.js
├── paste-interceptor.js
├── elementor-format-converter.js
├── elementor-editor-detector.js
├── elementor-data-extractor.js
├── editor-injector.js
├── donation-manager.js
├── element-selector.js
├── offscreen.html
├── offscreen.js
├── popup/
│   ├── popup.html
│   ├── popup.css
│   └── popup.js
├── icons/
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── styles/
    └── highlight.css
```

### What Gets Excluded

- Documentation files (`*.md`)
- Build scripts (`*.ps1`)
- Development files
- `.git` folder
- `node_modules` (if any)
- Test files

## Release Workflow

### Step-by-Step

1. **Update Version**
   ```json
   // chrome-extension/manifest.json
   {
     "version": "1.2.0"  // Increment version
   }
   ```

2. **Update Changelog**
   ```markdown
   // CHANGELOG.md
   ## [1.2.0] - 2025-10-16
   ### Added
   - New feature description
   ```

3. **Commit Changes**
   ```bash
   git add .
   git commit -m "Release v1.2.0: Description of changes"
   ```

4. **Push to GitHub**
   ```bash
   git push origin main
   ```

5. **Workflow Runs Automatically**
   - Builds extension
   - Creates release
   - Uploads ZIP file

6. **Verify Release**
   - Go to Releases page
   - Check ZIP file is attached
   - Download and test

## Release Notes

Each release includes:

### Title
```
Elementor Copier v{version}
```

### Body
- Download link to ZIP file
- Installation instructions
- Link to CHANGELOG
- Bitcoin donation address
- Note about GitHub-only distribution

### Assets
- `elementor-copier-v{version}.zip` (uploaded by workflow)
- `Source code (zip)` (auto-generated by GitHub)
- `Source code (tar.gz)` (auto-generated by GitHub)

## User Instructions

### What Users Should Do

1. Go to Releases page
2. Find latest release
3. Download `elementor-copier-v*.zip` from Assets
4. Extract ZIP
5. Load in Chrome as unpacked extension

### What Users Should NOT Do

- ❌ Download "Source code" archives
- ❌ Try to install source code as extension
- ❌ Clone repository for installation (unless building from source)

## Troubleshooting

### Release Not Created

**Possible causes:**
- Version already exists (check existing releases)
- Build script failed (check Actions logs)
- Permissions issue (check workflow permissions)

**Solutions:**
- Increment version number
- Check Actions tab for errors
- Verify `permissions: contents: write` in workflow

### Wrong Files in Release

**Issue:** Source code archives confusing users

**Solution:**
- Add prominent note in README
- Include download guide
- Update release notes to clarify
- Can't remove GitHub's auto-generated files

### Build Script Fails

**Common issues:**
- Invalid JSON in manifest.json
- Missing files
- Permission errors

**Solutions:**
- Validate manifest.json
- Check all files exist
- Run script with admin rights if needed

## Version Numbering

Follow semantic versioning:

- **MAJOR.MINOR.PATCH** (e.g., 1.2.0)
- **MAJOR**: Breaking changes (1.0.0 → 2.0.0)
- **MINOR**: New features (1.0.0 → 1.1.0)
- **PATCH**: Bug fixes (1.0.0 → 1.0.1)

### Examples

- `1.0.0` - Initial release
- `1.0.1` - Bug fix
- `1.1.0` - New donation features
- `1.2.0` - Improved copy with API extraction
- `2.0.0` - Major rewrite (breaking changes)

## Best Practices

### Before Release

- [ ] Test extension thoroughly
- [ ] Update version in manifest.json
- [ ] Update CHANGELOG.md
- [ ] Update popup version display
- [ ] Test build script locally
- [ ] Verify all features work

### After Release

- [ ] Download release ZIP
- [ ] Test installation
- [ ] Verify all features work
- [ ] Update documentation if needed
- [ ] Announce release (if applicable)

### For Users

- [ ] Clear download instructions
- [ ] Prominent warning about source code
- [ ] Direct download links
- [ ] Visual guides
- [ ] Troubleshooting help

## Automation Details

### Workflow Triggers

```yaml
on:
  push:
    branches:
      - main
    paths:
      - 'chrome-extension/**'
      - 'build-extension.ps1'
      - '.github/workflows/build-and-release.yml'
  workflow_dispatch:
```

Triggers when:
- Changes pushed to main branch
- Changes in chrome-extension folder
- Changes to build script
- Changes to workflow file
- Manual trigger via Actions UI

### Workflow Steps

1. Checkout code
2. Get version from manifest
3. Check if release exists
4. Build extension (if new version)
5. Create release (if new version)
6. Upload ZIP file
7. Skip if version exists

### Permissions Required

```yaml
permissions:
  contents: write
```

Allows workflow to:
- Create releases
- Upload assets
- Create tags

## Summary

**For Users:**
- Download `elementor-copier-v*.zip` from Releases
- Ignore "Source code" files
- Follow installation guide

**For Developers:**
- Update version in manifest.json
- Push to main branch
- Workflow handles the rest
- Release created automatically

**Key Point:**
Only the `elementor-copier-v*.zip` file is the actual extension. GitHub's auto-generated source code archives are NOT the extension!

---

**Last Updated:** 2025-10-16
**Current Version:** 1.2.0
